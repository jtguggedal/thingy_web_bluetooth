<!doctype html>
<html>
  <head>
    <title>Thingy:52 Web Bluetooth</title>
  </head>
  <body>
    <button id="connectBtn">Connect</button>
    <div id="temperature"></div>
    <script type="module">
      
		import Thingy from "./js/Thingy.js";

		const thingy = new Thingy({logEnabled: true});

		/*
		const myHandler = data => {
			console.log("custom handler");

			for (let d in data) {
				console.log(`${d}: ${data[d]}`);
			}
		}*/

		async function start(device) {
			await device.connect()
			.then(async () => {
				await device.temperature.connect()
				.then(async () => {
					//device.temperature.addListener(myHandler);
					await device.temperature._notify(true);
				});
			});
		}
      
      document.querySelector("#connectBtn").addEventListener("click", async () => {
          start(thingy);
      });
    </script>
  </body>
</html>